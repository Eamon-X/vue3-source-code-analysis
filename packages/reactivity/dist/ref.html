<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module">
      import { ref, effect } from "./reactivity-esm.js";
      // import { ref, effect } from "/node_modules/vue/dist/vue.esm-browser.js";
      const flag = ref(false); // 因为普通类型无法做拦截代理，所以ref会自动将普通类型包装成对象
      // wrap(false) => { value: false }
      // const flag = {
      //   _v: false,
      //   get value() { // 收集effect
      //     console.log("get value");
      //     return this._v;
      //   },
      //   set value(newValue) {  // 触发effect
      //     console.log("set value");
      //     this._v = newValue;
      //   },
      // }
      const runner = effect(() => {
        app.innerHTML = `flag：${flag.value ? "true了" : "false了"}`;
      });
      setTimeout(() => {
        flag.value = true;
      }, 1888);
    </script>
  </body>
</html>
